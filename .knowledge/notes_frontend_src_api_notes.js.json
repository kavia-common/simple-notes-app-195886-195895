{"is_source_file": true, "format": "JavaScript", "description": "This file provides API functions for managing notes in a notes application. It includes functions for listing, creating, updating, and deleting notes, with fallback mock implementations for offline or testing scenarios. It also contains utility functions for URL building, environment configuration, and local storage management for mock data.", "external_files": ["fetch API (built-in browser API)"], "external_methods": ["fetch()"], "published": ["listNotes", "createNote", "updateNote", "deleteNote", "getNotesApiMode"], "classes": [], "methods": [{"name": "normalizeNote(note)", "description": "Normalizes a note object by ensuring all fields are strings and setting 'updatedAt' timestamp.", "scope": "", "scopeKind": ""}, {"name": "getFeatureFlags()", "description": "Retrieves feature flags from environment variables and returns a Set of flags.", "scope": "", "scopeKind": ""}, {"name": "isMockForced()", "description": "Determines if mock API should be forced based on feature flags.", "scope": "", "scopeKind": ""}, {"name": "getBaseUrl()", "description": "Constructs the base URL for API requests from environment variables.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(pathname)", "description": "Builds a full URL by combining the base URL and a given pathname.", "scope": "", "scopeKind": ""}, {"name": "parseJsonSafe(res)", "description": "Safely parses JSON from a response text, returning null if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "isNetworkError(err)", "description": "Checks if an error is a network error (TypeError).", "scope": "", "scopeKind": ""}, {"name": "loadMockNotes()", "description": "Loads mock notes from localStorage, with error handling.", "scope": "", "scopeKind": ""}, {"name": "saveMockNotes(notes)", "description": "Saves notes array to localStorage.", "scope": "", "scopeKind": ""}, {"name": "mockGenerateId()", "description": "Generates a mock ID based on current timestamp and random component.", "scope": "", "scopeKind": ""}, {"name": "mockList()", "description": "Returns sorted list of mock notes.", "scope": "", "scopeKind": ""}, {"name": "mockCreate({ title, content })", "description": "Creates a new mock note and stores it in localStorage.", "scope": "", "scopeKind": ""}, {"name": "mockUpdate(id, { title, content })", "description": "Updates an existing mock note by ID.", "scope": "", "scopeKind": ""}, {"name": "mockDelete(id)", "description": "Deletes a mock note by ID.", "scope": "", "scopeKind": ""}, {"name": "requestJson(path, options = {})", "description": "Performs a fetch request and parses JSON with error handling.", "scope": "", "scopeKind": ""}, {"name": "withFallback(backendFn, mockFn)", "description": "Attempts a backend fetch; falls back to mock on network errors or if forced.", "scope": "", "scopeKind": ""}, {"name": "listNotes()", "description": "Lists notes from backend or mock fallback.", "scope": "", "scopeKind": ""}, {"name": "createNote({ title, content })", "description": "Creates a new note via backend or mock fallback.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, { title, content })", "description": "Updates an existing note via backend or mock fallback.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Deletes a note via backend or mock fallback.", "scope": "", "scopeKind": ""}, {"name": "getNotesApiMode()", "description": "Returns current API mode ('mock' or 'auto').", "scope": "", "scopeKind": ""}], "calls": ["buildUrl()", "parseJsonSafe()", "loadMockNotes()", "saveMockNotes()", "normalizeNote()", "getFeatureFlags()", "isMockForced()", "requestJson()", "withFallback()", "mockList()", "mockCreate()", "mockUpdate()", "mockDelete()"], "search-terms": ["notes API", "mock fallback", "localStorage notes", "note normalization", "API URL construction", "environment feature flags", "mock ID generator", "async fetch JSON"], "state": 2, "file_id": 17, "knowledge_revision": 41, "git_revision": "a8ee26883c985437ff8dbd2e60da1e468e46bf8c", "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^const STORAGE_KEY = \"kavia.notes.mock.v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function buildUrl(pathname) {$/", "language": "JavaScript", "kind": "function", "signature": "(pathname)"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^export async function createNote({ title, content }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, content })"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^export async function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getBaseUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function getBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getFeatureFlags", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function getFeatureFlags() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getNotesApiMode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^export function getNotesApiMode() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMockForced", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function isMockForced() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isNetworkError", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function isNetworkError(err) {$/", "language": "JavaScript", "kind": "function", "signature": "(err)"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^export async function listNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadMockNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function loadMockNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "mockCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function mockCreate({ title, content }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, content })"}, {"_type": "tag", "name": "mockDelete", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function mockDelete(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "mockGenerateId", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function mockGenerateId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "mockList", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function mockList() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "mockUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function mockUpdate(id, { title, content }) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, { title, content })"}, {"_type": "tag", "name": "normalizeNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function normalizeNote(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "parseJsonSafe", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function parseJsonSafe(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "requestJson", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function requestJson(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "saveMockNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^function saveMockNotes(notes) {$/", "language": "JavaScript", "kind": "function", "signature": "(notes)"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^export async function updateNote(id, { title, content }) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, { title, content })"}, {"_type": "tag", "name": "withFallback", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195886-195895/notes_frontend/src/api/notes.js", "pattern": "/^async function withFallback(backendFn, mockFn) {$/", "language": "JavaScript", "kind": "function", "signature": "(backendFn, mockFn)"}], "hash": "d9f92be692d09a8acfb227222396d203", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/api/notes.js", "revision_history": [{"41": "a8ee26883c985437ff8dbd2e60da1e468e46bf8c"}]}